document.addEventListener('DOMContentLoaded',()=>{const isArabic=document.documentElement.lang==='ar';const translations={en:{nameRequired:'Name is required.',companyRequired:'Company is required.',schoolRequired:'School/Institution is required.',organizationRequired:'Organization is required.',emailRequired:'Email is required.',invalidEmail:'Please enter a valid email address.',phoneRequired:'Mobile number is required.',invalidPhone:'Please enter a valid phone number.',positionRequired:'Position is required.',designationRequired:'Designation is required.',jobTitleRequired:'Job Title is required.',websiteRequired:'Website is required.',invalidWebsite:'Please enter a valid website URL.',headshotRequired:'A professional headshot is required.',invalidFileType:'Invalid file type. Please upload a JPG, PNG, or WEBP image.',fileTooLarge:'File is too large. Maximum size is 10 MB.',fieldRequired:'This field is required.',selectionRequired:'Please make a selection.',studentCountRequired:'Please enter a valid number of students.',gradeLevelRequired:'Please specify the grade level(s).',dobRequired:'Date of birth is required.',consentRequired:'You must provide consent to register.',interestRequired:'Please select at least one area of interest.',specifyInterest:'Please specify your area of interest.',sessionRequired:'Please select at least one session from Day 1 or Day 2.',optionRequired:'Please select an option.',submitting:'Submitting...',submitInquiry:'Submit Inquiry',registerNow:'Register Now',submitRegistration:'Submit Registration',submitApplication:'Submit Application',submitGroupRegistration:'Submit Group Registration',downloadNow:'Download Now',noFileChosen:'No file chosen',eventHasStarted:'The event has started!',earlyBirdEnded:'The early bird offer has ended!',bookABooth:'Book a Booth',sponsorNow:'Sponsor Now',submissionErrorInquiry:'Sorry, there was a problem with your inquiry. Please check your network connection and try again. Error: ',submissionErrorRegistration:'Sorry, there was a problem with your registration. Please check your network connection and try again. If the problem persists, contact support. Error: ',submissionErrorApplication:'Sorry, there was a problem with your application. Please check your network and try again. Error: ',submissionErrorRequest:'Sorry, there was a problem submitting your request. Please try again. Error: ',cookieMessage:'We use cookies to enhance your browsing experience and analyze our traffic. By clicking "Accept", you consent to our use of cookies.',cookieLearnMore:'Learn More',cookieAccept:'Accept',cookieDecline:'Decline',linkCopied:'Link Copied!'},ar:{nameRequired:'الاسم مطلوب.',companyRequired:'اسم الشركة مطلوب.',schoolRequired:'اسم المدرسة/المؤسسة مطلوب.',organizationRequired:'اسم المنظمة مطلوب.',emailRequired:'البريد الإلكتروني مطلوب.',invalidEmail:'الرجاء إدخال عنوان بريد إلكتروني صالح.',phoneRequired:'رقم الجوال مطلوب.',invalidPhone:'الرجاء إدخال رقم هاتف صالح.',positionRequired:'المنصب مطلوب.',designationRequired:'المسمى الوظيفي مطلوب.',jobTitleRequired:'المسمى الوظيفي مطلوب.',websiteRequired:'الموقع الإلكتروني مطلوب.',invalidWebsite:'الرجاء إدخال عنوان موقع إلكتروني صالح.',headshotRequired:'صورة شخصية احترافية مطلوبة.',invalidFileType:'نوع الملف غير صالح. يرجى تحميل صورة بصيغة JPG, PNG, أو WEBP.',fileTooLarge:'الملف كبير جدًا. الحجم الأقصى هو 10 ميجابايت.',fieldRequired:'هذا الحقل مطلوب.',selectionRequired:'الرجاء الاختيار.',studentCountRequired:'الرجاء إدخال عدد صالح من الطلاب.',gradeLevelRequired:'الرجاء تحديد المستوى (المستويات) الدراسي.',dobRequired:'تاريخ الميلاد مطلوب.',consentRequired:'يجب تقديم الموافقة للتسجيل.',interestRequired:'الرجاء اختيار مجال اهتمام واحد على الأقل.',specifyInterest:'الرجاء تحديد مجال اهتمامك.',sessionRequired:'الرجاء اختيار جلسة واحدة على الأقل من اليوم الأول أو اليوم الثاني.',optionRequired:'الرجاء اختيار خيار.',submitting:'جارٍ الإرسال...',submitInquiry:'إرسال الاستفسار',registerNow:'سجل الآن',submitRegistration:'إرسال التسجيل',submitApplication:'إرسال الطلب',submitGroupRegistration:'إرسال تسجيل المجموعة',downloadNow:'حمّل الآن',noFileChosen:'لم يتم اختيار ملف',eventHasStarted:'لقد بدأ الحدث!',earlyBirdEnded:'لقد انتهى عرض الحجز المبكر!',bookABooth:'احجز جناحك',sponsorNow:'كن راعيًا',submissionErrorInquiry:'عذرًا، حدثت مشكلة في استفسارك. يرجى التحقق من اتصالك بالشبكة والمحاولة مرة أخرى. خطأ: ',submissionErrorRegistration:'عذرًا، حدثت مشكلة في تسجيلك. يرجى التحقق من اتصالك بالشبكة والمحاولة مرة أخرى. إذا استمرت المشكلة، يرجى الاتصال بالدعم. خطأ: ',submissionErrorApplication:'عذرًا، حدثت مشكلة في طلبك. يرجى التحقق من اتصالك بالشبكة والمحاولة مرة أخرى. خطأ: ',submissionErrorRequest:'عذرًا، حدثت مشكلة في إرسال طلبك. يرجى المحاولة مرة أخرى. خطأ: ',cookieMessage:'نحن نستخدم ملفات تعريف الارتباط لتحسين تجربة التصفح الخاصة بك وتحليل حركة المرور لدينا. بالنقر على "قبول"، فإنك توافق على استخدامنا لملفات تعريف الارتباط.',cookieLearnMore:'اعرف المزيد',cookieAccept:'قبول',cookieDecline:'رفض',linkCopied:'تم نسخ الرابط!'}};const t=isArabic?translations.ar:translations.en;const showError=(input,message)=>{const formGroup=input.closest('.form-group, .form-group-consent, .interest-group-container');if(!formGroup)return;const errorElement=formGroup.querySelector('.error-message');if(errorElement){errorElement.innerText=message;errorElement.style.display='block'}
if(input.tagName.toLowerCase()!=='div'&&input.type!=='file'&&!input.closest('.consent-group')){input.classList.add('invalid')}};const clearError=(input)=>{const formGroup=input.closest('.form-group, .form-group-consent, .interest-group-container');if(!formGroup)return;const errorElement=formGroup.querySelector('.error-message');if(errorElement){errorElement.innerText='';errorElement.style.display='none'}
if(input.tagName.toLowerCase()!=='div'&&input.type!=='file'&&!input.closest('.consent-group')){input.classList.remove('invalid')}};const fileToBase64=(file)=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onload=(event)=>{const img=new Image();img.src=event.target?.result;img.onload=()=>{const canvas=document.createElement('canvas');const maxWidth=800;let{width,height}=img;if(width>maxWidth){const ratio=maxWidth/width;width=maxWidth;height=height*ratio}
canvas.width=width;canvas.height=height;const ctx=canvas.getContext('2d');if(!ctx){return reject(new Error('Could not get canvas context'))}
ctx.drawImage(img,0,0,width,height);const dataUrl=canvas.toDataURL('image/jpeg',0.8);const base64=dataUrl.split(',')[1];resolve(base64)};img.onerror=(error)=>reject(error)};reader.onerror=(error)=>reject(error)})};const validateField=(field)=>{if(!field)return!0;let isValid=!0;const value=field.value?.trim();clearError(field);const isRequired=field.hasAttribute('required');if(isRequired&&(field.type==='checkbox'?!field.checked:value==='')){isValid=!1;let message=t.fieldRequired;switch(field.name){case 'name':message=t.nameRequired;break;case 'company':case 'organization':message=t.organizationRequired;break;case 'school':case 'school_name':message=t.schoolRequired;break;case 'email':message=t.emailRequired;break;case 'phone':message=t.phoneRequired;break;case 'job_title':case 'position':case 'designation':message=t.jobTitleRequired;break;case 'website':message=t.websiteRequired;break;case 'headshot_upload':message=t.headshotRequired;break;case 'student_count':message=t.studentCountRequired;break;case 'grade_level':message=t.gradeLevelRequired;break;case 'dob':message=t.dobRequired;break;case 'consent':message=t.consentRequired;break;default:if(field.tagName.toLowerCase()==='select')message=t.selectionRequired}
showError(field,message)}else if(value!==''){switch(field.type){case 'email':if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)){isValid=!1;showError(field,t.invalidEmail)}
break;case 'tel':if(!/^\+?[\d\s()-]+$/.test(value)){isValid=!1;showError(field,t.invalidPhone)}
break;case 'url':case 'text':if(field.name.includes('website')||field.name.includes('linkedin')){if(!/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i.test(value)){isValid=!1;showError(field,t.invalidWebsite)}}
break;case 'file':const file=field.files[0];if(file){const allowedTypes=['image/jpeg','image/png','image/webp'];const maxSize=10*1024*1024;if(!allowedTypes.includes(file.type)){isValid=!1;showError(field,t.invalidFileType)}else if(file.size>maxSize){isValid=!1;showError(field,t.fileTooLarge)}}
break}}
return isValid};function initializeForms(){const forms=[{id:'contact-form',successId:'form-success-message',formType:'contact',buttonTextKey:'submitInquiry',errorTextKey:'submissionErrorInquiry'},{id:'student-registration-form',successId:'student-form-success',formType:'student',buttonTextKey:'registerNow',errorTextKey:'submissionErrorRegistration'},{id:'booth-registration-form',successId:'booth-form-success',formType:'booth',buttonTextKey:'submitRegistration',errorTextKey:'submissionErrorRegistration'},{id:'sponsorship-registration-form',successId:'sponsor-form-success',formType:'sponsorship',buttonTextKey:'submitInquiry',errorTextKey:'submissionErrorInquiry'},{id:'speaker-registration-form',successId:'speaker-form-success',formType:'speaker',buttonTextKey:'submitApplication',errorTextKey:'submissionErrorApplication'},{id:'school-group-registration-form',successId:'school-group-form-success',formType:'schoolGroup',buttonTextKey:'submitGroupRegistration',errorTextKey:'submissionErrorRegistration'},{id:'hackathon-registration-form',successId:'hackathon-form-success',formType:'hackathon',buttonTextKey:'submitApplication',errorTextKey:'submissionErrorApplication'},{id:'deck-request-form',successId:'deck-form-success',formType:'deckRequest',buttonTextKey:'downloadNow',errorTextKey:'submissionErrorRequest',formContainerId:'deck-form-container'}];forms.forEach(config=>{const form=document.getElementById(config.id);if(!form)return;const submitButton=form.querySelector('button[type="submit"]');const originalButtonText=submitButton.textContent;const successMessageElement=document.getElementById(config.successId);const formContainer=config.formContainerId?document.getElementById(config.formContainerId):form;const errorText=t[config.errorTextKey]||t.submissionErrorInquiry;form.addEventListener('submit',async(e)=>{e.preventDefault();const isFormValid=Array.from(form.querySelectorAll('[required]')).every(field=>validateField(field));let customValid=!0;if(form.id.startsWith('student-registration-form')){customValid=validateInterestCheckboxes(form)}
if(form.id.startsWith('speaker-registration-form')){customValid=validateSpeakerCheckboxes(form)}
if(isFormValid&&customValid){submitButton.disabled=!0;submitButton.textContent=t.submitting;try{const API_ENDPOINT='https://smsbackend.studentdiwan.com/sendgrid/expo/mail';const formData=new FormData(form);const formDataObject=Object.fromEntries(formData.entries());const source=formData.get('form_source')||'Website Form';let subject=`New Submission: ${source}`;const nameIdentifier=formDataObject.company||formDataObject.school_name||formDataObject.name;if(nameIdentifier){subject+=` - ${nameIdentifier}`}
let emailContent=`<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; text-align: left; direction: ltr;">
                                <p>A new form submission has been received from <strong>${source}</strong>:</p>
                                <table style="width: 100%; border-collapse: collapse; text-align: left;">`;for(const[key,value]of formData.entries()){if(key!=='headshot_base64'&&value&&typeof value!=='object'){const formattedKey=key.replace(/_/g,' ').replace(/\b\w/g,l=>l.toUpperCase());emailContent+=`<tr style="border-bottom: 1px solid #eee;"><td style="padding: 8px; font-weight: bold; width: 30%;">${formattedKey}:</td><td style="padding: 8px;">${value}</td></tr>`}}
emailContent+=`</table></div>`;const dataToSend={subject:subject,emailContent:emailContent,data:{...formDataObject,formType:config.formType}};const fileInput=form.querySelector('input[type="file"]');if(fileInput&&fileInput.files.length>0){const file=fileInput.files[0];const base64String=await fileToBase64(file);dataToSend.data.headshot_base64=base64String;dataToSend.data.headshot_filename=file.name;dataToSend.data.headshot_mimetype=file.type}
const response=await fetch(API_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(dataToSend)});if(!response.ok){const errorData=await response.json().catch(()=>({message:`Server responded with status: ${response.status}`}));throw new Error(errorData.message)}
if(form.id==='contact-form'&&(formData.get('interest')==='exhibiting'||formData.get('interest')==='sponsoring')){triggerDownload()}
if(form.id==='deck-request-form'){triggerDownload()}
if(formContainer&&successMessageElement){formContainer.style.display='none';successMessageElement.style.display='block';successMessageElement.scrollIntoView({behavior:'smooth',block:'center'})}else{window.location.href=isArabic?'thank-you-ar.html':'thank-you.html'}}catch(error){console.error('Submission Error:',error);alert(errorText+error.message)}finally{submitButton.disabled=!1;submitButton.textContent=originalButtonText}}else{const firstInvalidField=form.querySelector('.invalid, .error-message[style*="block"]');firstInvalidField?.closest('.form-group, .form-group-consent, .interest-group-container')?.scrollIntoView({behavior:'smooth',block:'center'})}});Array.from(form.querySelectorAll('[required], input[type="email"], input[type="tel"], input[type="url"]')).forEach(input=>{const eventType=['select','checkbox','radio','file'].includes(input.type)||input.tagName.toLowerCase()==='select'?'change':'input';input.addEventListener(eventType,()=>validateField(input))});if(config.id==='student-registration-form'){const otherCheckbox=form.querySelector('#interest-other');const otherInterestGroup=form.querySelector('#other-interest-group');otherCheckbox?.addEventListener('change',()=>{otherInterestGroup.style.display=otherCheckbox.checked?'block':'none';if(!otherCheckbox.checked)form.querySelector('#interest-other-text').value=''})}
if(config.id==='speaker-registration-form'){const fileInput=form.querySelector('#form-speaker-headshot-upload');const fileNameDisplay=form.querySelector('#file-name-display');fileInput?.addEventListener('change',()=>{fileNameDisplay.textContent=fileInput.files.length>0?fileInput.files[0].name:t.noFileChosen})}
if(config.id==='booth-registration-form'){const urlParams=new URLSearchParams(window.location.search);const pkg=urlParams.get('package');const boothId=urlParams.get('boothId');if(pkg)form.querySelector('#form-booth-package').value=pkg;if(boothId)form.querySelector('#form-booth-id').value=boothId}})}
function highlightActiveNav(){const currentPage=window.location.pathname.split('/').pop()||(isArabic?'index-ar.html':'index.html');document.querySelectorAll('#main-nav a.nav-link').forEach(link=>{link.classList.remove('active');const linkPage=link.href.split('/').pop();if(linkPage===currentPage){link.classList.add('active');const parentDropdown=link.closest('.has-dropdown');if(parentDropdown){parentDropdown.querySelector('a.nav-link')?.classList.add('active')}}})}
function initializeMobileNav(){const header=document.getElementById('main-header');const navToggle=document.querySelector('.nav-toggle');const mainNav=document.getElementById('main-nav');if(!header||!navToggle||!mainNav)return;const desktopLangLink=document.querySelector('.lang-switcher a');if(desktopLangLink){const mobileLangSwitcher=document.createElement('div');mobileLangSwitcher.className='mobile-header-lang-switcher';const mobileLangLink=desktopLangLink.cloneNode(!0);mobileLangSwitcher.appendChild(mobileLangLink);if(!header.querySelector('.mobile-header-lang-switcher')){navToggle.parentNode?.insertBefore(mobileLangSwitcher,navToggle)}}
if(!mainNav.querySelector('.mobile-nav-header')){const headerContent=`<div class="mobile-nav-header"><a href="${isArabic ? 'index-ar.html' : 'index.html'}" class="mobile-nav-logo"><img src="https://res.cloudinary.com/dj3vhocuf/image/upload/f_auto,q_auto/v1762817230/logo_500_x_250_px_450_x_250_px_180_x_75_px_or55ec.png" alt="Logo"></a></div>`;mainNav.insertAdjacentHTML('afterbegin',headerContent)}
if(!mainNav.querySelector('.mobile-nav-ctas')){const ctaContent=`<div class="mobile-nav-ctas"><a href="${isArabic ? 'booth-registration-ar.html' : 'booth-registration.html'}" class="btn btn-primary">${t.bookABooth}</a><a href="${isArabic ? 'sponsorship-registration-ar.html' : 'sponsorship-registration.html'}" class="btn btn-primary">${t.sponsorNow}</a></div>`;mainNav.insertAdjacentHTML('beforeend',ctaContent)}
navToggle.addEventListener('click',()=>{const isExpanded=header.classList.toggle('nav-open');navToggle.setAttribute('aria-expanded',String(isExpanded))});mainNav.addEventListener('click',(e)=>{const link=e.target.closest('a');if(link&&!link.parentElement.classList.contains('has-dropdown')){header.classList.remove('nav-open');navToggle.setAttribute('aria-expanded','false')}})}
function initializeDropdowns(){const dropdowns=document.querySelectorAll('.has-dropdown');dropdowns.forEach((dropdown,index)=>{const toggle=dropdown.querySelector('a.nav-link');const menu=dropdown.querySelector('.dropdown-menu');if(!toggle||!menu)return;toggle.setAttribute('aria-haspopup','true');toggle.setAttribute('aria-expanded','false');menu.id=`dropdown-menu-${index}`;toggle.setAttribute('aria-controls',menu.id);toggle.addEventListener('click',(e)=>{e.preventDefault();const isCurrentlyOpen=dropdown.classList.contains('dropdown-open');document.querySelectorAll('.has-dropdown.dropdown-open').forEach(d=>d.classList.remove('dropdown-open'));if(!isCurrentlyOpen){dropdown.classList.add('dropdown-open')}
toggle.setAttribute('aria-expanded',String(!isCurrentlyOpen))})});document.addEventListener('click',(e)=>{if(!e.target.closest('.has-dropdown')){document.querySelectorAll('.has-dropdown.dropdown-open').forEach(d=>d.classList.remove('dropdown-open'))}})}
function initializeMainCountdown(){const countdownContainer=document.getElementById('countdown-timer');if(!countdownContainer)return;const countdownDate=new Date('2026-04-19T08:00:00').getTime();const timerInterval=setInterval(()=>{const now=new Date().getTime();const distance=countdownDate-now;if(distance<0){clearInterval(timerInterval);countdownContainer.innerHTML=`<h4>${t.eventHasStarted}</h4>`;return}
const days=String(Math.floor(distance/(1000*60*60*24))).padStart(2,'0');const hours=String(Math.floor((distance%(1000*60*60*24))/(1000*60*60))).padStart(2,'0');const minutes=String(Math.floor((distance%(1000*60*60))/(1000*60))).padStart(2,'0');const seconds=String(Math.floor((distance%(1000*60))/1000)).padStart(2,'0');document.getElementById('days').textContent=days;document.getElementById('hours').textContent=hours;document.getElementById('minutes').textContent=minutes;document.getElementById('seconds').textContent=seconds},1000)}
function initializeEarlyBirdCountdown(){const countdownContainer=document.getElementById('early-bird-countdown');if(!countdownContainer)return;const countdownDate=new Date('2025-11-20T08:00:00').getTime();const timerInterval=setInterval(()=>{const now=new Date().getTime();const distance=countdownDate-now;if(distance<0){clearInterval(timerInterval);countdownContainer.innerHTML=`<h4>${t.earlyBirdEnded}</h4>`;return}
document.getElementById('eb-days').textContent=String(Math.floor(distance/(1000*60*60*24))).padStart(2,'0');document.getElementById('eb-hours').textContent=String(Math.floor((distance%(1000*60*60*24))/(1000*60*60))).padStart(2,'0');document.getElementById('eb-minutes').textContent=String(Math.floor((distance%(1000*60*60))/(1000*60))).padStart(2,'0');document.getElementById('eb-seconds').textContent=String(Math.floor((distance%(1000*60))/1000)).padStart(2,'0')},1000)}
const triggerDownload=()=>{const link=document.createElement('a');link.href='/assets/EduExpoQatar2026-Sponsorship-Deck.pdf';link.download='EduExpoQatar2026-Sponsorship-Deck.pdf';document.body.appendChild(link);link.click();document.body.removeChild(link)};const validateInterestCheckboxes=(form)=>{const interestsContainer=form.querySelector('#form-student-interests');if(!interestsContainer)return!0;const checked=interestsContainer.querySelectorAll('input[type="checkbox"]:checked').length>0;if(!checked){showError(interestsContainer,t.interestRequired);return!1}
clearError(interestsContainer);const otherCheckbox=form.querySelector('#interest-other');const otherTextInput=form.querySelector('#interest-other-text');if(otherCheckbox?.checked&&otherTextInput?.value.trim()===''){showError(otherTextInput,t.specifyInterest);return!1}
if(otherTextInput)clearError(otherTextInput);return!0};const validateSpeakerCheckboxes=(form)=>{let isValid=!0;const day1Container=form.querySelector('#session-day1-group');const day2Container=form.querySelector('#session-day2-group');const d1Checked=day1Container?.querySelectorAll('input:checked').length>0;const d2Checked=day2Container?.querySelectorAll('input:checked').length>0;if(!d1Checked&&!d2Checked){showError(day1Container,t.sessionRequired);isValid=!1}else{clearError(day1Container)}['consent-promotional-group','consent-recording-group'].forEach(id=>{const group=form.querySelector(`#${id}`);if(group&&!group.querySelector('input:checked')){showError(group,t.optionRequired);isValid=!1}else if(group){clearError(group)}});return isValid};function initializeFaqAccordion(){document.querySelectorAll('.faq-question').forEach(button=>{button.addEventListener('click',()=>{const item=button.closest('.faq-item');if(item){const isOpened=item.classList.toggle('open');button.setAttribute('aria-expanded',String(isOpened))}})})}
function initializeExitIntentModal(){const modal=document.getElementById('exit-intent-modal');if(!modal||sessionStorage.getItem('exitModalShown')==='true')return;let exitTimeout;const showModal=()=>{if(modal.classList.contains('visible'))return;modal.classList.add('visible');sessionStorage.setItem('exitModalShown','true');document.removeEventListener('mouseout',handleMouseOut);document.removeEventListener('mouseenter',handleMouseEnter)};const hideModal=()=>modal.classList.remove('visible');const handleMouseOut=e=>{if(e.clientY<=0&&e.relatedTarget==null&&!e.toElement){exitTimeout=setTimeout(showModal,300)}};const handleMouseEnter=()=>{if(exitTimeout){clearTimeout(exitTimeout)}};document.addEventListener('mouseout',handleMouseOut);document.addEventListener('mouseenter',handleMouseEnter);modal.addEventListener('click',e=>{if(e.target===modal||e.target.closest('.modal-close-btn'))hideModal();})}
function initializeDeckRequestModal(){const deckModal=document.getElementById('deck-request-modal');if(!deckModal)return;const showDeckModal=()=>{document.getElementById('exit-intent-modal')?.classList.remove('visible');deckModal.classList.add('visible')};const hideDeckModal=()=>deckModal.classList.remove('visible');document.addEventListener('click',e=>{if(e.target.matches('#open-deck-form-btn'))showDeckModal();});deckModal.addEventListener('click',e=>{if(e.target===deckModal||e.target.closest('.modal-close-btn'))hideDeckModal();})}
function initializeHomePartners(){const logoGrid=document.getElementById('home-partners-grid');if(!logoGrid)return;const partners=[{src:'https://cdn.asp.events/CLIENT_Mark_All_D856883D_926F_07B7_E9D09EE4984A0639/sites/inclusive-education-mena/media/Logos/Ed-logo.png',alt:'Edarabia Logo'},{src:'https://res.cloudinary.com/dj3vhocuf/image/upload/v1761216928/Blue_Bold_Office_Idea_Logo_50_x_50_px_10_l68irx.png',alt:'Sheraton Hotels & Resorts Logo',customClass:'sheraton-logo'},{src:'https://i0.wp.com/blog.10times.com/wp-content/uploads/2019/09/cropped-10times-logo-hd.png?fit=3077%2C937&ssl=1',alt:'10times Logo'},{src:'https://www.eventbrite.com/blog/wp-content/uploads/2025/02/Eventbrite_Hero-Lock-up_Brite-Orange.png',alt:'Eventbrite Logo',customClass:'eventbrite-logo'},{src:'https://res.cloudinary.com/dj3vhocuf/image/upload/v1762105728/NB.hiloop.official.logo_1_wwcxzh.webp',alt:'Hi Loop Logo'},{src:'https://res.cloudinary.com/dj3vhocuf/image/upload/v1762148595/Untitled_design_-_2025-11-03T111231.113_eejcdu.webp',alt:'Lovable Logo'},{src:'https://res.cloudinary.com/dj3vhocuf/image/upload/v1762451007/Untitled_design_-_2025-11-06T231151.489_xy7rwx.png',alt:'Marhaba Information Guide Logo',href:'https://marhaba.qa/'}];const fragment=document.createDocumentFragment();[...partners,...partners].forEach(p=>{const item=document.createElement('div');item.className='logo-item';const img=document.createElement('img');img.alt=p.alt;img.loading='lazy';img.src=p.src.includes('res.cloudinary.com')?p.src.replace('/upload/','/upload/w_160,h_80,c_limit,q_auto,f_auto/'):p.src;if(p.customClass)img.classList.add(p.customClass);item.innerHTML=p.href?`<a href="${p.href}" target="_blank" rel="noopener noreferrer">${img.outerHTML}</a>`:img.outerHTML;fragment.appendChild(item)});logoGrid.innerHTML='';logoGrid.appendChild(fragment)}
function initializeTabs(containerSelector){const tabContainer=document.querySelector(containerSelector);if(!tabContainer)return;const tabs=Array.from(tabContainer.querySelectorAll('.tab-btn'));tabContainer.addEventListener('click',(e)=>{const clickedTab=e.target.closest('.tab-btn');if(!clickedTab||clickedTab.classList.contains('active'))return;const targetId=clickedTab.dataset.tab||clickedTab.getAttribute('aria-controls');const targetPanel=document.getElementById(targetId);if(!targetPanel){console.error(`Tab content panel with ID "${targetId}" not found.`);return}
tabs.forEach(tab=>{const isClickedTab=tab===clickedTab;tab.classList.toggle('active',isClickedTab);tab.setAttribute('aria-selected',isClickedTab);const panelId=tab.dataset.tab||tab.getAttribute('aria-controls');if(panelId){const panel=document.getElementById(panelId);if(panel){panel.classList.toggle('active',isClickedTab);panel.hidden=!isClickedTab}}})})}
function initializeImpactStats(){const section=document.getElementById('who-is-attending');if(!section)return;const observer=new IntersectionObserver((entries)=>{if(entries[0].isIntersecting){section.classList.add('is-visible');section.querySelectorAll('.impact-number').forEach(el=>{if(el.dataset.animated)return;el.dataset.animated='true';const target=parseInt(el.dataset.target,10);let current=0;const increment=target/100;const interval=setInterval(()=>{current+=increment;if(current>=target){clearInterval(interval);current=target}
el.textContent=`${Math.ceil(current).toLocaleString()}+`},20)});observer.unobserve(section)}},{threshold:0.4});observer.observe(section)}
function initializeReadingProgressBar(){const bar=document.querySelector('.read-progress-bar');const content=document.getElementById('blog-post');if(!bar||!content)return;window.addEventListener('scroll',()=>{const rect=content.getBoundingClientRect();const progress=Math.max(0,Math.min(1,-rect.top/(rect.height-window.innerHeight)));bar.style.width=`${progress * 100}%`},{passive:!0})}
function initializeCopyLinkButtons(){document.querySelectorAll('#copy-link-button, #copy-link-button-inline').forEach(button=>{button.addEventListener('click',()=>{navigator.clipboard.writeText(window.location.href).then(()=>{const original=button.innerHTML;button.innerHTML=`<i class="fas fa-check"></i>`;button.style.backgroundColor='#4db6ac';setTimeout(()=>{button.innerHTML=original;button.style.backgroundColor=''},2000)})})})}
function initializeCookieBanner(){const banner=document.getElementById('cookie-banner');if(!banner||localStorage.getItem('cookieConsent'))return;banner.innerHTML=`
                <p>${t.cookieMessage} <a href="${isArabic ? 'privacy-ar.html' : 'privacy.html'}" class="cookie-learn-more">${t.cookieLearnMore}</a></p>
                <div class="cookie-banner-actions">
                    <button id="acceptCookies" class="btn btn-primary btn-sm">${t.cookieAccept}</button>
                    <button id="declineCookies" class="btn btn-secondary btn-sm">${t.cookieDecline}</button>
                </div>
            `;banner.style.display='flex';const acceptBtn=document.getElementById('acceptCookies');const declineBtn=document.getElementById('declineCookies');acceptBtn.addEventListener('click',()=>{localStorage.setItem('cookieConsent','accepted');banner.style.display='none'});declineBtn.addEventListener('click',()=>{localStorage.setItem('cookieConsent','declined');banner.style.display='none'})}
highlightActiveNav();initializeMobileNav();initializeDropdowns();initializeMainCountdown();initializeEarlyBirdCountdown();initializeForms();initializeFaqAccordion();initializeExitIntentModal();initializeHomePartners();initializeTabs('.agenda-tabs');initializeTabs('.exposure-tabs');initializeImpactStats();initializeDeckRequestModal();initializeReadingProgressBar();initializeCopyLinkButtons();initializeCookieBanner()})